(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6085,e=>{"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g;let s=t.fetch,l=t.fetch.bind(t),a=t.Headers,r=t.Request,n=t.Response;e.s(["Headers",0,a,"Request",0,r,"Response",0,n,"default",0,l,"fetch",0,s])},94278,e=>{"use strict";var t=e.i(43476),s=e.i(71645),l=e.i(17927),a=e.i(67881),r=e.i(23750),n=e.i(70065),i=e.i(64030),c=e.i(31343),o=e.i(67240);function d(){let e=(0,s.useRef)(null),[d,u]=(0,s.useState)("menu"),[m,x]=(0,s.useState)(0),[p,h]=(0,s.useState)([]),[f,b]=(0,s.useState)(""),[g,w]=(0,s.useState)(!1),y=(0,s.useRef)({box:{x:50,y:150,velocity:0},pipes:[],score:0,animationId:null,frameCount:0,scale:1}),j=(0,s.useRef)([]),v=(0,s.useRef)(0);(0,s.useEffect)(()=>{let e=[];for(let t=1;t<=6;t++){let s=new Image;s.src=`/bird${t}.png`,e.push(s)}j.current=e},[]);let N=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=new Image;e.src="/bg.jpg",N.current=e},[]);let C=(0,s.useCallback)(async()=>{let{data:e,error:t}=await l.supabase.from("high_scores").select("*").order("score",{ascending:!1}).limit(10);e&&!t&&h(e)},[]);(0,s.useEffect)(()=>{C()},[C]);let R=async()=>{if(m>0){let e=f.trim()||"Anonymous";await l.supabase.from("high_scores").insert({player_name:e,score:m}),await C(),w(!1),b("")}},k=()=>{let t=e.current,s=y.current,l=t?t.width:window.innerWidth,a=t?t.height:window.innerHeight,r=l/375;s.scale=r,s.box={x:l/6,y:a/2,velocity:0},s.pipes=[{x:l+50,gapY:120*r}],s.score=0,s.frameCount=0,x(0),u("playing"),w(!1)},S=(0,s.useCallback)(()=>{"playing"===d&&(y.current.box.velocity=-8*y.current.scale)},[d]);return(0,s.useEffect)(()=>{let e=e=>{e.preventDefault(),"menu"===d?k():"playing"===d?S():"gameOver"===d&&k()};return window.addEventListener("touchstart",e,{passive:!1}),()=>window.removeEventListener("touchstart",e)},[d,S]),(0,s.useEffect)(()=>{if("playing"!==d)return;let t=e.current;if(!t)return;let s=t.getContext("2d");if(!s)return;let l=y.current,a=.5*l.scale,r=2*l.scale,n=()=>{let e=window.innerWidth,i=window.innerHeight;t.width=e,t.height=i;let c=Math.min(e,i)/8*l.scale,o=Math.min(e,i)/10*l.scale,d=Math.min(e,i)/1.7*l.scale;if(s.clearRect(0,0,e,i),N.current?.complete?s.drawImage(N.current,0,0,e,i):(s.fillStyle="#0ea5e9",s.fillRect(0,0,e,i)),l.box.velocity+=a,l.box.y+=l.box.velocity,j.current.length>0){l.frameCount%5==0&&(v.current=(v.current+1)%j.current.length);let e=j.current[v.current];e.complete?s.drawImage(e,l.box.x,l.box.y,c,c):(s.fillStyle="#fde047",s.fillRect(l.box.x,l.box.y,c,c))}if(l.frameCount++,l.pipes.forEach((e,t)=>{e.x-=r,s.fillStyle="#000",s.fillRect(e.x,0,o,e.gapY),s.fillRect(e.x,e.gapY+d,o,i),s.strokeStyle="#16a34a",s.lineWidth=2,s.strokeRect(e.x,0,o,e.gapY),s.strokeRect(e.x,e.gapY+d,o,i),e.x+o<l.box.x&&!e.scored&&(l.score++,x(l.score),e.scored=!0),e.x<-o&&l.pipes.splice(t,1)}),(0===l.pipes.length||l.pipes[l.pipes.length-1].x<e-150)&&l.pipes.push({x:e+50,gapY:Math.random()*(i-d-50)+50}),l.box.y<0||l.box.y+c>i||l.pipes.some(e=>l.box.x+c>e.x&&l.box.x<e.x+o&&(l.box.y<e.gapY||l.box.y+c>e.gapY+d))){u("gameOver"),w(!0),l.animationId&&cancelAnimationFrame(l.animationId);return}l.animationId=requestAnimationFrame(n)};return l.animationId=requestAnimationFrame(n),()=>{l.animationId&&cancelAnimationFrame(l.animationId)}},[d]),(0,t.jsx)("div",{className:"w-full h-screen flex flex-col items-center justify-center p-0 md:hidden",children:(0,t.jsxs)("div",{className:"relative w-full h-full",children:[(0,t.jsx)("canvas",{ref:e,onClick:S,className:"w-full h-full cursor-pointer"}),(0,t.jsx)("div",{className:"absolute top-2 left-2 px-4 py-2 rounded-xl bg-black/60 backdrop-blur-lg border border-white/10 shadow-lg",children:(0,t.jsx)("p",{className:"text-2xl font-bold text-yellow-400 drop-shadow-lg",children:m})}),"menu"===d&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-md flex items-center justify-center",children:(0,t.jsxs)(a.Button,{onClick:k,size:"lg",className:"text-lg px-6 py-4 rounded-xl shadow-xl hover:scale-110 transition",children:[(0,t.jsx)(c.Play,{className:"mr-2"})," Start"]})}),"gameOver"===d&&(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/60 backdrop-blur-xl gap-3 p-2",children:[(0,t.jsxs)(n.Card,{className:"bg-slate-800/70 border-slate-700 rounded-2xl shadow-xl w-full max-w-sm mb-3",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center text-yellow-400",children:[(0,t.jsx)(i.Trophy,{className:"mr-2"})," Leaderboard"]})}),(0,t.jsx)(n.CardContent,{children:0===p.length?(0,t.jsx)("p",{className:"text-slate-400 text-center py-2",children:"No scores yet"}):(0,t.jsx)("div",{className:"space-y-1",children:p.map((e,s)=>(0,t.jsxs)("div",{className:`flex items-center justify-between px-2 py-1 rounded-xl shadow-md ${0===s?"bg-yellow-500/20 border border-yellow-500":"bg-slate-700/50"}`,children:[(0,t.jsxs)("span",{className:"text-white font-medium text-sm",children:["#",s+1," ",e.player_name]}),(0,t.jsx)("span",{className:"text-yellow-400 font-bold text-sm",children:e.score})]},e.id))})})]}),(0,t.jsxs)("div",{className:"text-center bg-slate-800/70 p-4 rounded-2xl border border-slate-700 shadow-xl w-full max-w-sm",children:[(0,t.jsxs)("p",{className:"text-2xl text-yellow-400 mb-3",children:["Score: ",m]}),g&&(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)(r.Input,{placeholder:"Enter Name",value:f,onChange:e=>b(e.target.value),onKeyDown:e=>"Enter"===e.key&&R(),className:"bg-slate-700 text-white border-slate-600 mb-2"}),(0,t.jsxs)(a.Button,{onClick:R,className:"w-full mb-1",children:[(0,t.jsx)(i.Trophy,{className:"mr-2"})," Save Score"]})]}),(0,t.jsxs)(a.Button,{onClick:k,size:"lg",className:"w-full mt-1",children:[(0,t.jsx)(o.RotateCcw,{className:"mr-2"})," Try Again"]}),(0,t.jsx)("p",{className:"mt-2 text-sm text-white/70",children:"Made by Tanzeel Khan from â¤"})]})]})]})})}e.s(["default",()=>d])},97499,e=>{e.n(e.i(94278))},11737,e=>{e.v(e=>Promise.resolve().then(()=>e(6085)))}]);